# They Are Here â€” Civic Signal Aggregation Map

A delayed, aggregated map of when ICE-related issues become a topic of collective attention in Plainfield, NJ â€” grounded in public records and opt-in community signals.

**Not** a real-time alert system. **Not** a report tracker. A **memory map** of civic attention over time.

---

## ğŸš€ Quick Start

### 1. Install Dependencies

```bash
python -m venv .venv
source .venv/bin/activate  # Linux/Mac
# or
.venv\Scripts\activate  # Windows

pip install -r processing/requirements.txt
```

### 2. Run the Pipeline

```bash
# Full pipeline (scrape + process + export)
python run_pipeline.py --full

# Process existing data only
python run_pipeline.py

# Export only
python run_pipeline.py --export-only
```

### 3. Preview Locally

```bash
cd build
python -m http.server 8000
```

Then open: http://localhost:8000

### 4. Deploy to GitHub Pages

See [DEPLOYMENT.md](DEPLOYMENT.md) for detailed hosting instructions.

**Current Status:** v4.2 with enhanced social media integration and community safety features
- âš ï¸ Development mode active - See [STATUS.md](STATUS.md)
- âœ¨ New in v4.2: Advanced analytics system, poster reports, Time to Midnight clocks, Community Safety Hub
- ğŸš€ **NEW:** Strategic vision & roadmap for phases 4.3-5.0 - See [VISION_COMPLETE.md](VISION_COMPLETE.md)

---

## ğŸ¯ Positioning & Differentiation

### Prior Art Context

Most prior systems in the geo-social and civic mapping space focus on either **real-time alerting** (e.g., Dataminr, Citizen) or **static visualization** of activity density (e.g., 311 dashboards, Snaptrends). Patents in this area primarily claim methods for location-based content filtering, proximity-driven interaction, or context-enhanced map interfaces, typically optimized for engagement, responsiveness, or operational dispatch. These systems rely on keyword matching, proximity graphs, kernel density estimation, or burst detection, and often operate at the individual or real-time event level.

### HEAT's White Space

HEAT occupies a distinct, under-patented space: **delayed, aggregated semantic mapping of collective civic attention**. Rather than tracking users or surfacing real-time alerts, HEAT intentionally buffers and clusters public records and opt-in signals to reveal *when and where issues become socially salient*. Its core innovation is not geolocation itself, but the combination of:

| Component | Purpose |
|-----------|--------|
| **Intentional input** | Opt-in signals, not scraped data |
| **Semantic clustering** | HDBSCAN + sentence embeddings |
| **Time decay** | Recent signals weighted higher |
| **Geographic aggregation** | ZIP-level, not individual |
| **High sensitivity** | Shows all activity patterns |

This positions HEAT as a tool for **interpretation and understanding**, not surveillance or response â€” a category largely absent from existing patents and commercial platforms.

### Competitive Landscape

| System | Approach | HEAT Difference |
|--------|----------|----------------|
| Dataminr | Real-time event detection | We're intentionally delayed |
| Citizen/Life360 | Individual location tracking | We track ideas, not people |
| 311 Dashboards | Complaint density visualization | We extract semantic meaning |
| Snaptrends | Geo-tagged social media | We use curated public records |
| Hoodsquare | Static neighborhood profiling | We show temporal emergence |

---

## ğŸ“ Project Structure

```
heat/
â”œâ”€â”€ build/                      # Static files (deploy to S3)
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ app.js
â”‚   â”œâ”€â”€ styles.css
â”‚   â””â”€â”€ data/
â”‚       â”œâ”€â”€ clusters.json       # Generated by pipeline
â”‚       â”œâ”€â”€ timeline.json       # Generated by pipeline  
â”‚       â”œâ”€â”€ keywords.json       # Generated by NLP analysis
â”‚       â”œâ”€â”€ heatmap.json        # Generated by KDE
â”‚       â””â”€â”€ plainfield.geojson  # ZIP boundaries
â”‚
â”œâ”€â”€ processing/                 # Python data pipeline
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”œâ”€â”€ ingest.py              # Normalize raw CSVs
â”‚   â”œâ”€â”€ cluster.py             # Semantic clustering (HDBSCAN)
â”‚   â”œâ”€â”€ nlp_analysis.py        # Keywords + burst detection + trends
â”‚   â”œâ”€â”€ heatmap.py             # Kernel density estimation
â”‚   â”œâ”€â”€ scraper.py             # Ethical RSS/news scraping
â”‚   â”œâ”€â”€ buffer.py              # Safety thresholds
â”‚   â””â”€â”€ export_static.py       # Export to JSON
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ raw/                   # Your input CSVs
â”‚   â”‚   â”œâ”€â”€ news.csv
â”‚   â”‚   â”œâ”€â”€ advocacy.csv
â”‚   â”‚   â””â”€â”€ council.csv
â”‚   â””â”€â”€ processed/             # Intermediate files
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ run_pipeline.bat       # Windows pipeline runner
â”‚   â”œâ”€â”€ run_pipeline.sh        # Mac/Linux pipeline runner
â”‚   â”œâ”€â”€ deploy_s3.bat          # Deploy to AWS S3
â”‚   â””â”€â”€ setup_s3.bat           # One-time S3 bucket setup
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ POSITIONING.md         # Patent landscape analysis
â”‚   â”œâ”€â”€ ALGORITHMS.md          # Algorithm documentation
â”‚   â””â”€â”€ MOBILE.md              # Mobile & text features guide
â”‚
â”œâ”€â”€ VISION_COMPLETE.md         # ğŸš€ Strategic enhancement plan overview
â”œâ”€â”€ ROADMAP_v4.3-5.0.md        # Comprehensive 39-week roadmap
â”œâ”€â”€ VISION_SUMMARY.md          # Executive 2-page brief
â”œâ”€â”€ SPRINT_PLAN_FEB2026.md     # Immediate 4-week sprint
â”œâ”€â”€ SPRINT_CHECKLIST.md        # Day-by-day implementation tasks
â”œâ”€â”€ DOCUMENTATION_INDEX.md     # Guide to all documentation
â”œâ”€â”€ ANALYTICS_INTEGRATION_COMPLETE.md  # v4.2 analytics system report
â””â”€â”€ ANALYTICS_COMPLETE_SUMMARY.md      # Analytics quick reference
â”‚
â””â”€â”€ README.md
```

---

## ğŸ“± Mobile & Text Features

### iPhone PWA Support
Install HEAT as a standalone app:
1. Safari â†’ Share â†’ "Add to Home Screen"
2. Launch from home icon (fullscreen, no browser)

**Features:**
- âœ“ Safe area support (notch, home indicator)
- âœ“ True black OLED theme
- âœ“ 44px+ touch targets (iOS HIG)
- âœ“ Offline map tile caching

### 3D Satellite Mode
Toggle button in map header switches to:
- Esri World Imagery basemap
- Enhanced cluster visualization
- Pulse animations for high-attention areas

### Printable Poster Report
**NEW in v4.2**: Generate professional printable civic signal reports
- Click "ğŸ–¨ï¸ Printable Report" in download section
- Auto-generates formatted A4/Letter page with:
  - Current statistics and trends
  - Top 5 report groups with summaries
  - ZIP code breakdown
  - Source trust panel
  - Verification guidance
- Opens in new window with print dialog
- Clean typography optimized for physical distribution

### Time to Midnight Clocks
**NEW in v4.2**: Visual civic attention intensity indicators
- Three regional clocks (North, Central, South Jersey)
- Clock hand position represents composite score:
  - 6:00 = calm baseline
  - 12:00 = maximum civic attention
- Score combines:
  - Recent signal volume (last 7 days)
  - Trend direction and magnitude
  - Burst detection
  - Active alert levels
- Color-coded: Green (calm) â†’ Amber â†’ Red (high activity)
- **NOT a threat level** â€” shows collective civic awareness patterns

### Community Safety Hub
**NEW in v4.2**: Actionable rapid-response resource center
- **Verified Resource Panel**: Click-to-call hotlines (ACLU NJ, United We Dream, Make the Road NJ)
- **Printable Safety Checklist**: Interactive checkboxes with Know Your Rights guidance
- **Shareable Neighbor Advisory**: Auto-populated with live cluster data
  - Copy to clipboard with one click
  - Share via text/WhatsApp/community groups
  - Includes current status, trends, and action guidance
- **Traditional Know Your Rights**: Full legal guidance (expandable section)

### Social Media Integration
**NEW in v4.2**: Enhanced community signal collection
- **Reddit**: Free API integration ($0 cost)
  - Subreddits: r/newjersey, r/nj_politics, r/hoboken, r/immigration
  - Gracefully skips if no credentials provided
  - Set `REDDIT_CLIENT_ID` and `REDDIT_CLIENT_SECRET` to enable
- **X/Twitter**: Paid API support (Basic tier $100/mo)
  - Updated to API v2
  - Gracefully skips if no credits
  - Includes cost disclaimer in UI
- **Facebook**: CSV-import mode (manual export)
  - Removed broken HTML scraping
  - Users export via browser extension, pipeline imports CSV
  - Graph API v19.0 for users with tokens

ğŸ“– **Full Mobile Guide**: See [docs/MOBILE.md](docs/MOBILE.md)

---

## ğŸ“Š Data Format

### Input CSVs

All CSV files in `data/raw/` should have these columns:

| Column | Description | Example |
|--------|-------------|---------|
| `text` | The content/headline | "City council discusses..." |
| `zip` | ZIP code | "07060" |
| `date` | Date (YYYY-MM-DD) | "2025-01-10" |

### Output JSON

The pipeline generates:

- `clusters.json` â€” Semantic clusters with strength scores
- `timeline.json` â€” Weekly aggregation of all signals

---

## ğŸ›¡ï¸ Safety Thresholds (Maximum Sensitivity Mode)

The buffer stage uses the following thresholds optimized for maximum visibility:

| Threshold | Value | Purpose |
|-----------|-------|---------|
| Minimum cluster size | 1 signal | Show all activity including single records |
| Minimum sources | 1 source | Accept single-source reports |
| Time delay | 0 hours | No delay - show all temporal patterns |
| Minimum strength | 0.0 | Display all signal densities |

**Note:** Maximum sensitivity mode prioritizes comprehensive visibility over strict verification. Displays 95 active clusters showing all collected public signals and patterns.

---

## â˜ï¸ Deploy to AWS S3 (Free)

### One-Time Setup

1. Install AWS CLI: https://aws.amazon.com/cli/
2. Configure credentials: `aws configure`
3. Edit `scripts/setup_s3.bat` â€” change `BUCKET_NAME`
4. Run: `scripts\setup_s3.bat`

### Deploy Updates

```batch
scripts\run_pipeline.bat
scripts\deploy_s3.bat
```

---

## ğŸ¯ What This Shows

âœ… **Aggregated** patterns of civic attention  
âœ… **Comprehensive** visibility of all signal patterns  
âœ… **Public sources** only (news, council minutes, advocacy reports)  
âœ… **ZIP-level** geographic resolution  

## ğŸš« What This Does NOT Show

âŒ Real-time locations or alerts  
âŒ Individual sightings or reports  
âŒ Vehicle descriptions or routes  
âŒ Any personally identifiable information  

---

## ï¿½ Algorithm Details

### Semantic Clustering

HEAT uses **HDBSCAN** (Hierarchical Density-Based Spatial Clustering) on **sentence-transformer embeddings** (`all-MiniLM-L6-v2`) to group records by meaning, not keywords.

```
Input texts â†’ Embeddings (384-dim) â†’ HDBSCAN â†’ Semantic clusters
```

### Attention Scoring

Cluster strength uses **exponential time decay**:

$$S = \sum_{i} e^{-\lambda \cdot \Delta t_i}$$

Where:
- $\lambda = \ln(2) / 72$ (72-hour half-life)
- $\Delta t_i$ = hours since record $i$

Recent signals contribute more than older ones, creating a "recency-weighted volume" score.

### Novelty Detection (Future)

$$N = 1 - \max(\text{cosine\_similarity}(c_{new}, C_{historical}))$$

Measures how different a new cluster is from past patterns. High novelty = emerging concern.

---

## ï¿½ğŸ“ License

Open source. Built for civic awareness, not surveillance.
